---
import { Icon } from 'astro-icon';
import { Item } from '../../services/trello';
export interface Props {
  title?: string;
  items?: Array<Item>;
  image?: string | any; // TODO: find HTMLElementProps
}

let { title = await Astro.slots.render('title'), items = [] } = Astro.props;

title = title.replace(/"/g, '');
---

<section>
  <div class="m-6">
    {
      title && (
        <h2 class="m-4 text-muted text-lg hover:text-gray-700 dark:text-gray-400 transition duration-150 ease-in-out">
          <Icon
            name="tabler:arrow-big-right"
            class="w-6 h-6 inline-block align-text-bottom text-primary dark:text-slate-200"
          />{' '}
          {title}
        </h2>
      )
    }

    {
      items &&
        items.length > 0 &&
        items.map(({ title, subitems, icon }) => (
          <div class="ml-8 flex">
            <div class="flex flex-col items-center mr-4">
              <div>
                {
                  <div class="flex items-center justify-center w-10 h-10 rounded-full border-primary dark:border-blue-700 border-2">
                    {icon && <Icon name={icon} class="w-6 h-6 text-primary dark:text-slate-200" />}
                  </div>
                }
              </div>
              <div class="w-px h-full bg-gray-300 dark:bg-slate-500" />
            </div>
            <div class="pt-1 pb-8">
              {title && <p class="mb-2 font-bold"> {title} </p>}
              {subitems &&
                subitems.length &&
                subitems.map((si: Item) => (
                  <ul>
                    <li class="font-normal"> {si.title}</li>
                  </ul>
                ))}
            </div>
          </div>
        ))
    }
  </div>
</section>
